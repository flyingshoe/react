{"version":3,"file":"static/js/793.57d558d4.chunk.js","mappings":"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","sources":["pages/covid.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport {\r\n  BarChart,\r\n  Bar,\r\n  XAxis,\r\n  YAxis,\r\n  Tooltip,\r\n  ResponsiveContainer,\r\n} from \"recharts\";\r\nimport CircularProgress from \"@mui/material/CircularProgress\";\r\nimport { Container, Button } from \"react-bootstrap\";\r\n\r\nexport default function Covid() {\r\n  const [covidData, setCovidData] = useState([\r\n    {\r\n      infected: 57784,\r\n      lastUpdatedAtApify: \"2020-10-01T14:45:00.000Z\",\r\n    },\r\n    {\r\n      infected: 57794,\r\n      lastUpdatedAtApify: \"2020-10-02T14:40:00.000Z\",\r\n    },\r\n  ]);\r\n  const [showLoader, setLoader] = useState(true);\r\n  const [curData, setCurData] = useState(\"infected\");\r\n\r\n  useEffect(() => {\r\n    refineGraph(covidData);\r\n    fetch(\r\n      \"https://api.apify.com/v2/datasets/suHgi59tSfu02VsRO/items?format=json&clean=1&fields=infected,lastUpdatedAtApify\"\r\n    )\r\n      .then((data) => data.json())\r\n      .then((json) => {\r\n        setCovidData(json);\r\n        refineGraph(json);\r\n        //Hide Loader\r\n        setLoader(false);\r\n      });\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  const refineGraph = (covidData) => {\r\n    //Make a copy of covidData\r\n    var newData = [...covidData];\r\n\r\n    //Add formatted date string\r\n    let lastCase = 0;\r\n    newData = newData.map((data, index) => {\r\n      //Create a new Date Object\r\n      const d = new Date(data.lastUpdatedAtApify.replace(/Z$/, \"\"));\r\n      let day = d.toLocaleString(\"en\", { day: \"2-digit\" });\r\n      let month = d.toLocaleString(\"en\", { month: \"2-digit\" });\r\n      let monthStr = d.toLocaleString(\"en\", { month: \"short\" });\r\n      let year = d.toLocaleString(\"en\", { year: \"numeric\" });\r\n\r\n      //Get new cases - cases today minus cases yesterday\r\n      let newCases =\r\n        index > 0 ? data.infected - newData[index - 1].infected : 0;\r\n\r\n      //Check for abnormal Data and replace it with \"lastCase\"\r\n      newCases < 1 ? (newCases = lastCase) : (lastCase = newCases);\r\n\r\n      return {\r\n        ...data,\r\n        day: day,\r\n        month: month,\r\n        monthStr: monthStr,\r\n        year: year,\r\n        dayMonth: `${day}-${monthStr}`,\r\n        dayNum: parseInt(d.toLocaleString(\"en\", { day: \"numeric\" })),\r\n        monthNum: parseInt(d.toLocaleString(\"en\", { month: \"numeric\" })),\r\n        newCases: newCases,\r\n      };\r\n    });\r\n\r\n    //Clean up the Data\r\n    //17th to 29th May is problematic, remove it. Also remove extreme values like >10k cases\r\n    newData = newData.filter(\r\n      (data) =>\r\n        (data.dayNum < 17 || data.dayNum > 29 || data.monthNum !== 5) &&\r\n        data.newCases <= 10000\r\n    );\r\n\r\n    //Remove duplicated items by DATE\r\n    let uniqueVals = [];\r\n    newData = newData.filter((data) => {\r\n      if (!uniqueVals.includes(data.dayMonth) && data.infected != null) {\r\n        uniqueVals.push(data.dayMonth);\r\n        return data;\r\n      }\r\n      return null;\r\n    });\r\n\r\n    //Save Data\r\n    setCovidData(newData);\r\n  };\r\n\r\n  const renderBarChart = (\r\n    <BarChart data={covidData}>\r\n      <Bar dataKey={curData} stroke=\"var(--bs-teal)\" fill=\"var(--bs-teal)\" />\r\n      <XAxis stroke=\"var(--bs-gray-dark)\" dataKey=\"dayMonth\" />\r\n      <YAxis stroke=\"var(--bs-gray-dark)\" />\r\n      <Tooltip cursor={true} />\r\n    </BarChart>\r\n  );\r\n  return (\r\n    <Container>\r\n      <div\r\n        style={{\r\n          height: \"200px\",\r\n          width: \"200px\",\r\n          border: \"6px solid var(--bs-teal)\",\r\n          borderRadius: \"50%\",\r\n          margin: \"50px auto\",\r\n          userSelect: \"none\",\r\n        }}\r\n      >\r\n        <div\r\n          style={{\r\n            textAlign: \"center\",\r\n            transform: \"translateY(5%)\",\r\n            fontWeight: \"bold\",\r\n            color: \"var(--bs-teal)\",\r\n          }}\r\n        >\r\n          <div style={{ fontSize: \"80px\" }}>\r\n            {covidData[covidData.length - 1].newCases}\r\n          </div>\r\n          <div style={{ fontSize: \"20px\" }}>NEW CASES</div>\r\n        </div>\r\n      </div>\r\n      {showLoader && (\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            gap: 10,\r\n          }}\r\n        >\r\n          <CircularProgress size={30} style={{ color: \"var(--bs-teal)\" }} />\r\n          <h1 style={{ verticalAlign: \"middle\", color: \"var(--bs-teal)\" }}>\r\n            Loading Latest Data\r\n          </h1>\r\n        </div>\r\n      )}\r\n      <h3\r\n        style={{\r\n          textAlign: \"center\",\r\n          color: \"var(--bs-info)\",\r\n          marginTop: \"25px\",\r\n        }}\r\n      >\r\n        Last Updated: {covidData[covidData.length - 1].day}{\" \"}\r\n        {covidData[covidData.length - 1].monthStr}{\" \"}\r\n        {covidData[covidData.length - 1].year}\r\n      </h3>\r\n\r\n      {!showLoader && (\r\n        <div style={{ margin: \"60px 0\" }}>\r\n          <div\r\n            style={{\r\n              color: \"var(--bs-teal)\",\r\n              textAlign: \"center\",\r\n              fontSize: \"40px\",\r\n            }}\r\n          >\r\n            {curData === \"infected\" ? \"Total Cases\" : \"New Daily Cases\"}\r\n          </div>\r\n          <ResponsiveContainer width=\"100%\" aspect={2.5}>\r\n            {renderBarChart}\r\n          </ResponsiveContainer>\r\n          <div style={{ marginTop: \"25px\" }}></div>\r\n          <Button\r\n            active={curData === \"infected\" ? true : false}\r\n            variant=\"outline-info\"\r\n            onClick={(x) => {\r\n              setCurData(\"infected\");\r\n              x.currentTarget.blur();\r\n              //Work around to reanimate graph\r\n              setCovidData([...covidData]);\r\n            }}\r\n          >\r\n            Total Cases\r\n          </Button>\r\n          <Button\r\n            active={curData !== \"infected\" ? true : false}\r\n            variant=\"outline-info\"\r\n            onClick={(x) => {\r\n              setCurData(\"newCases\");\r\n              x.currentTarget.blur();\r\n              //Work around to reanimate graph\r\n              setCovidData([...covidData]);\r\n            }}\r\n          >\r\n            New Daily Cases\r\n          </Button>\r\n        </div>\r\n      )}\r\n    </Container>\r\n  );\r\n}\r\n"],"names":["Covid","useState","infected","lastUpdatedAtApify","covidData","setCovidData","showLoader","setLoader","curData","setCurData","useEffect","refineGraph","fetch","then","data","json","newData","lastCase","map","index","d","Date","replace","day","toLocaleString","month","monthStr","year","newCases","dayMonth","dayNum","parseInt","monthNum","filter","uniqueVals","includes","push","renderBarChart","dataKey","stroke","fill","cursor","style","height","width","border","borderRadius","margin","userSelect","textAlign","transform","fontWeight","color","fontSize","length","display","justifyContent","alignItems","gap","size","verticalAlign","marginTop","aspect","active","variant","onClick","x","currentTarget","blur"],"sourceRoot":""}